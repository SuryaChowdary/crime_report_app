<!-- Add Crime form -->
<div class="container">
  <div class="row justify-content-center mt-4 ">
    <div class="col-md-8">
      <div class="card">
        <div class="card-header">Report New Crime</div>
        <div class="card-body">
          <%= form_with(model: @crime, local: true) do |f| %>
            <div class="form-group">
              <%= f.label :City %>
              <%= f.collection_select :city_id, City.all, :id, :name, {prompt: "Select City"}, {include_hidden: false, class: "form-control", id: "city"} %>
            </div>
            <div class="form-group">
              <%= f.label :Locality %>
              <%= f.select :locality_id, options_for_select([["Select Locations"]]), {include_hidden: false}, {class: "form-control" ,id: "locality_ids"} %>     
            </div>
            <div class="form-group">
              <%= f.label :Name %>
              <%= f.text_field :name, class: 'form-control'%>
            </div>
            <div class="form-group"> 
              <%= f.label :description %> <br/>
              <%= f.text_area :crime_description, class: 'form-control' %>
            </div>
            <div class="form-group">
              <%= f.label :Date_and_Time %> <br/>
              <%= f.text_field :crime_time , class: 'form-control'%>
            </div>
            <div class="field">    
              <%= f.label :Priority %></br>
              <span class="option">High<span><%= f.radio_button :priority, "High" %></br>
              <span class="option">Medium<span><%= f.radio_button :priority, "Medium" %></br>
              <span class="option">Low<span><%= f.radio_button :priority, "Low" %></br>
            </div>
            <div class="field">    
              <%= f.label :Resolved%></br>
              <span class="option">False<span><%= f.radio_button :resolved, "False" %></br>
            </div>
            <div class="card-footer text-muted">
              <%= f.submit " Report Crime ", class: 'btn btn-primary' %>
              <%= link_to 'Back' , crimes_path, class:'btn btn-secondary' %>
            </div>
          <% end%>
        </div>
      </div>
    </div>
  </div>
  <script>
    $(document).on('change', '#city', function getLocalities() {
      var selectedCities = $(this).val();
      $.ajax({
        url: "/update_locality",
        method: "GET",
        data: { cities: selectedCities },
        success: function(data) {
          $("#locality_ids").html(data);
        }
      });
    });
  </script>
</div>